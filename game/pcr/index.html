<!DOCTYPE html>
<html lang="ja-JP">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>兰德索尔智力竞赛连结 - 公主连结R</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
		<style>
			:root {
				--deepblue: #0062cc;
			}
			body {
				font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", "メイリオ", "Meiryo", "Osaka", "ＭＳ Ｐゴシック", "MS P Gothic", sans-serif;
				background-color: #fffcf2;
                                
			}
			.title {
				box-sizing: border-box;
				width: 100%;
				max-width: 900px;
				margin-top: .5rem;
				padding-top: 24%;
				overflow: hidden;
				background: url('../../src/headimg.jpg') no-repeat 0 56%;
			}

			.select {
				font-weight: bold;
			}

			.container p {
				margin: .5rem 0;
			}

			dialog {
				border: 2px solid #745691;
				border-radius: 5px;
				background-color: #FFFFFF;
				padding: 0;
				width: 90%;
				max-width: 350px;
			}

			dialog::backdrop {
				position: fixed;
				top: 0px;
				right: 0px;
				bottom: 0px;
				left: 0px;
				background: rgba(0, 0, 0, 0.1);
			}

			form {
				margin: 0;
			}

			.d-header {
				box-sizing: inherit;
				background-color: #745691;
				padding: 5px 20px;
			}

			.d-header h1 {
				color: white;
				font-weight: bold;
				font-size: 24px;
				margin: 15px 10px;
			}

			.type {
				display: flex;
				flex-wrap: wrap;
				justify-content: center;
				align-items: center;
			}

			.type div {
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 16px;
				margin: 12px 8px;
				width: 80px;
				height: 80px;
				border-radius: 5px;
			}

			.type div:nth-child(1) {
				color: #337AB7;
				border: 2px solid #337AB7;
				background-color: #337AB74F;
			}

			.type div:nth-child(2) {
				color: #008000;
				border: 2px solid #008000;
				background-color: #0080004F;
			}

			.type div:nth-child(3) {
				color: #FDB127;
				border: 2px solid #FDB127;
				background-color: #FDB1274F;
			}

			.type div:nth-child(4) {
				color: #800080;
				border: 2px solid #800080;
				background-color: #8000804F;
			}

			.type div:nth-child(5) {
				color: #31708F;
				border: 2px solid #31708F;
				background-color: #31708F4F;
			}

			.type div:nth-child(6) {
				color: #FFC0CB;
				border: 2px solid #FFC0CB;
				background-color: #FFC0CB4F;
			}

			menu {
				padding: 10px 20px;
				margin: 0;
				display: flex;
				justify-content: right;
				align-items: center;
				background-color: #F0F0F0;
			}

			menu button {
				border: none;
				border-radius: 5px;
				background-color: #745691;
				width: 80px;
				height: 36px;
				color: white;
				transition: all 0.3s ease-out;
			}

			menu button:hover {
				border: none;
				background-color: #6d4099;
				transition: all 0.3s ease-in;
			}

			menu button:focus {
				outline: none;
			}

			.waves {
				position: relative;
				cursor: pointer;
				display: inline-block;
				overflow: hidden;
				text-align: center;
				-webkit-tap-highlight-color: transparent;
				z-index: 1;
			}

			.waves .waves-animation {
				position: absolute;
				border-radius: 50%;
				width: 25px;
				height: 25px;
				opacity: 0;
				background: rgba(255, 255, 255, 0.2);
				transition: all 0.7s ease-out;
				transition-property: transform, opacity, -webkit-transform;
				-webkit-transform: scale(0);
				transform: scale(0);
				pointer-events: none
			}

			input {
				border: 1px solid var(--orange);
			}

			input:focus {
				outline: none;
				border: 2px solid var(--orange);
			}

			td {
				white-space: pre-line;
			}

			td:last-child {
				font-weight: bold;
			}

			tr[data-type="1"] td:last-child {
				color: var(--orange)
			}

			tr[data-type="2"] td:last-child {
				color: var(--red)
			}

			tr[data-type="3"] td:last-child {
				color: var(--deepblue)
			}

			tr[data-type="4"] td:last-child {
				color: var(--purple)
			}

			tr[data-type="5"] td:last-child {
				color: var(--green)
			}

			tr[data-type="6"] td:last-child {
				color: var(--blue)
			}
                        .btn-purple { color: #ffffff; background-color: #CC66CC; border-color: #CC66CC; } .btn-purple:hover, .btn-purple:focus, .btn-purple:active, .btn-purple.active, .open .dropdown-toggle.btn-purple { color: #ffffff; background-color: #99389f; border-color: #99389f; } .btn-purple:active, .btn-purple.active, .open .dropdown-toggle.btn-purple { background-image: none; } .btn-purple.disabled, .btn-purple[disabled], fieldset[disabled] .btn-purple, .btn-purple.disabled:hover, .btn-purple[disabled]:hover, fieldset[disabled] .btn-purple:hover, .btn-purple.disabled:focus, .btn-purple[disabled]:focus, fieldset[disabled] .btn-purple:focus, .btn-purple.disabled:active, .btn-purple[disabled]:active, fieldset[disabled] .btn-purple:active, .btn-purple.disabled.active, .btn-purple[disabled].active, fieldset[disabled] .btn-purple.active { background-color: #CC66CC; border-color: #CC66CC; }
		</style>
	</head>
	<body>
		<div class="container">
			<div class="title">
			</div>
			<p class="select" lang="zh-CN">请选择难度</p>
			<p>
				<button id="normal" class="btn btn-primary">NORMAL</button>
				<button id="hard" class="btn btn-danger">HARD</button>
				<button id="veryhard" class="btn btn-purple">VERY HARD</button>
			</p>
			<table id="mainTable" class="table table-striped sampleTable">
				<thead>
					<tr>
						<th>序号</th>
						<th><a href="#" onclick="modal.showModal()">类别（查看说明）</a></th>
						<th>问题</th>
						<th>题干</th>
						<th>答案</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
			<p lang="zh-CN">数据来源：感谢NGA<a href="https://bbs.nga.cn/read.php?tid=30680031">@uid:753955</a>解包</p>
		</div>
		<dialog id="modal">
			<form lang="zh-CN" method="dialog">
				<header class="d-header">
					<h1>分类说明</h1>
				</header>
				<div class="type">
					<div>战斗<br/>体育</div>
					<div>语言<br/>故事</div>
					<div>文化<br/>杂学</div>
					<div>科学<br/>地理<br/>数学</div>
					<div>美食<br/>生活</div>
					<div>人<br/>生物</div>
				</div>
				<menu>
					<button class="waves" value="close">关闭</button>
				</menu>
			</form>
		</dialog>
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" crossorigin="anonymous"></script>
		<script crossorigin="anonymous"
				src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
		<script src="../../src/js/fancyTable.js"></script>
		<script type="text/javascript">
			function renderTable() {
				let str = "";
				for (let i = 0; i < data.length; i++) {
					str += "<tr data-type=" + data[i].genre + "><td>" + data[i].taq_no + "</td><td>" + data[i].genre + "</td><td>" + data[i].detail + "</td><td>" + data[i].detail_2 + "</td><td>" + data[i].word + "</td></tr>";
				}
				$("#mainTable").html(str);
			}

			$(document).ready(function () {
				$("#normal").on("click",function() {
					$.ajax({
						type:"get",
						url:"https://unicorn.js.org/data/source_n.json",
						dataType:"json",
						success:function(dataob) {
							data = dataob;
						},
						error:function() {
							alert("数据请求失败");
						},
						async:false
					});
					renderTable();
					$("#mainTable").fancyTable({
						pagination: true,
						perPage:10
					});
				});
				$("#hard").on("click",function() {
					$.ajax({
						type:"get",
						url:"https://unicorn.js.org/data/source_h.json",
						dataType:"json",
						success:function(dataob) {
							data = dataob;
						},
						error:function() {
							alert("数据请求失败");
						},
						async:false
					});
					renderTable();
					$("#mainTable").fancyTable({
						pagination: true,
						perPage:10
					});
				});
				$("#veryhard").on("click",function() {
					$.ajax({
						type:"get",
						url:"https://unicorn.js.org/data/source_vh.json",
						dataType:"json",
						success:function(dataob) {
							data = dataob;
						},
						error:function() {
							alert("数据请求失败");
						},
						async: false
					});
					renderTable();
					$("#mainTable").fancyTable({
						pagination: true,
						perPage: 10
					});
				});
			});
			document.addEventListener('DOMContentLoaded', function () {
				var duration = 750;
				// 样式string拼凑
				var forStyle = function (position) {
					var cssStr = '';
					for (var key in position) {
						if (position.hasOwnProperty(key)) cssStr += key + ':' + position[key] + ';';
					}
					;
					return cssStr;
				}

				// 获取鼠标点击位置
				var forRect = function (target) {
					var position = {
						top: 0,
						left: 0
					}, ele = document.documentElement;
					'undefined' != typeof target.getBoundingClientRect && (position = target.getBoundingClientRect());
					return {
						top: position.top + window.pageYOffset - ele.clientTop,
						left: position.left + window.pageXOffset - ele.clientLeft
					}
				}

				var show = function (event) {
					var pDiv = event.target,
							cDiv = document.createElement('div');
					pDiv.appendChild(cDiv);
					var rectObj = forRect(pDiv),
							_height = event.pageY - rectObj.top,
							_left = event.pageX - rectObj.left,
							_scale = 'scale(' + pDiv.clientWidth / 100 * 10 + ')';
					var position = {
						top: _height + 'px',
						left: _left + 'px'
					};
					cDiv.className = cDiv.className + " waves-animation",
							cDiv.setAttribute("style", forStyle(position)),
							position["-webkit-transform"] = _scale,
							position["-moz-transform"] = _scale,
							position["-ms-transform"] = _scale,
							position["-o-transform"] = _scale,
							position.transform = _scale,
							position.opacity = "1",
							position["-webkit-transition-duration"] = duration + "ms",
							position["-moz-transition-duration"] = duration + "ms",
							position["-o-transition-duration"] = duration + "ms",
							position["transition-duration"] = duration + "ms",
							position["-webkit-transition-timing-function"] = "cubic-bezier(0.250, 0.460, 0.450, 0.940)",
							position["-moz-transition-timing-function"] = "cubic-bezier(0.250, 0.460, 0.450, 0.940)",
							position["-o-transition-timing-function"] = "cubic-bezier(0.250, 0.460, 0.450, 0.940)",
							position["transition-timing-function"] = "cubic-bezier(0.250, 0.460, 0.450, 0.940)",
							cDiv.setAttribute("style", forStyle(position));
					var finishStyle = {
						opacity: 0,
						"-webkit-transition-duration": duration + "ms",
						"-moz-transition-duration": duration + "ms",
						"-o-transition-duration": duration + "ms",
						"transition-duration": duration + "ms",
						"-webkit-transform": _scale,
						"-moz-transform": _scale,
						"-ms-transform": _scale,
						"-o-transform": _scale,
						top: _height + "px",
						left: _left + "px",
					};
					setTimeout(function () {
						cDiv.setAttribute("style", forStyle(finishStyle));
						setTimeout(function () {
							pDiv.removeChild(cDiv);
						}, duration);
					}, 100)
				}
				document.querySelector('.waves').addEventListener('click', function (e) {
					show(e);
				}, !1);
			}, !1);
		</script>
	</body>
</html>
